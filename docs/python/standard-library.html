
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Python Stardard Library Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="django.html" />
    
    
    <link rel="prev" href="anaconda.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="./">
            
                <a href="./">
            
                    
                    Python
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="anaconda.html">
            
                <a href="anaconda.html">
            
                    
                    Anaconda
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.2" data-path="standard-library.html">
            
                <a href="standard-library.html">
            
                    
                    Python Stardard Library
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="django.html">
            
                <a href="django.html">
            
                    
                    Django
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../java/">
            
                <a href="../java/">
            
                    
                    Java
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../java/javafx.html">
            
                <a href="../java/javafx.html">
            
                    
                    JavaFX
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../java/android.md">
            
                <span>
            
                    
                    Android Studio
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../javascript/">
            
                <a href="../javascript/">
            
                    
                    JavaScript
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../javascript/jquery.html">
            
                <a href="../javascript/jquery.html">
            
                    
                    jQuery
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../javascript/react.html">
            
                <a href="../javascript/react.html">
            
                    
                    React
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../javascript/react-native.html">
            
                <a href="../javascript/react-native.html">
            
                    
                    React Native
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../javascript/node-js.html">
            
                <a href="../javascript/node-js.html">
            
                    
                    Node.js
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../c-sharp/">
            
                <a href="../c-sharp/">
            
                    
                    C#
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../c-sharp/dot-net.html">
            
                <a href="../c-sharp/dot-net.html">
            
                    
                    .NET
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../c-sharp/asp-dot-net.html">
            
                <a href="../c-sharp/asp-dot-net.html">
            
                    
                    ASP.NET
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../c/">
            
                <a href="../c/">
            
                    
                    C
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../swift/">
            
                <a href="../swift/">
            
                    
                    Swift
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../swift/xcode.html">
            
                <a href="../swift/xcode.html">
            
                    
                    Xcode
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../markup/">
            
                <a href="../markup/">
            
                    
                    Markup Language
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../markup/html.html">
            
                <a href="../markup/html.html">
            
                    
                    HTML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../markup/xml.html">
            
                <a href="../markup/xml.html">
            
                    
                    XML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../markup/gfm.html">
            
                <a href="../markup/gfm.html">
            
                    
                    GFM
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../css/">
            
                <a href="../css/">
            
                    
                    CSS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../css/bootstrap.html">
            
                <a href="../css/bootstrap.html">
            
                    
                    Bootstrap
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../typescript/">
            
                <a href="../typescript/">
            
                    
                    TypeScript
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../typescript/angular.html">
            
                <a href="../typescript/angular.html">
            
                    
                    Angular
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../php/">
            
                <a href="../php/">
            
                    
                    PHP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../cloud-services/">
            
                <a href="../cloud-services/">
            
                    
                    Cloud Services
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../cloud-services/aws.html">
            
                <a href="../cloud-services/aws.html">
            
                    
                    AWS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../cloud-services/google-cloud-platform.html">
            
                <a href="../cloud-services/google-cloud-platform.html">
            
                    
                    Google Cloud Platform
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../solution-stack/">
            
                <a href="../solution-stack/">
            
                    
                    Solution Stack
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../sql/">
            
                <a href="../sql/">
            
                    
                    SQL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="../wechat-mini-program/">
            
                <a href="../wechat-mini-program/">
            
                    
                    Wechat Mini Program
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="../cms/">
            
                <a href="../cms/">
            
                    
                    Content Management Systems
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="../cms/wordpress.html">
            
                <a href="../cms/wordpress.html">
            
                    
                    WordPress
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="../linux/">
            
                <a href="../linux/">
            
                    
                    Linux
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="../linux/regex.html">
            
                <a href="../linux/regex.html">
            
                    
                    Regular Expression
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="../linux/bash-scripting.html">
            
                <a href="../linux/bash-scripting.html">
            
                    
                    Bash Scripting
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="../virtualization/">
            
                <a href="../virtualization/">
            
                    
                    Virtualization
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.1" data-path="../virtualization/virtualbox.html">
            
                <a href="../virtualization/virtualbox.html">
            
                    
                    VirtualBox
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.2" data-path="../virtualization/docker.html">
            
                <a href="../virtualization/docker.html">
            
                    
                    Docker
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="../git/">
            
                <a href="../git/">
            
                    
                    Git
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="../graphic-design/">
            
                <a href="../graphic-design/">
            
                    
                    Graphic Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21" data-path="../networking/">
            
                <a href="../networking/">
            
                    
                    Networking
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22" data-path="../maple/">
            
                <a href="../maple/">
            
                    
                    Maple
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23" data-path="../theory/">
            
                <a href="../theory/">
            
                    
                    Theory
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.23.1" data-path="../theory/algorithm.html">
            
                <a href="../theory/algorithm.html">
            
                    
                    Data Structures and Algorithms
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Python Stardard Library</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="python-standard-library">Python Standard Library</h1>
<ul>
<li>All the following libraries are commonly included in Python distributions.</li>
<li><a href="https://docs.python.org/3.8/library/index.html" target="_blank">Click here</a> to view the complete documentation.</li>
</ul>
<h2 id="re"><code>re</code></h2>
<ul>
<li>It supports Regular Expression.</li>
<li><code>import re</code></li>
</ul>
<h3 id="usage">Usage</h3>
<ul>
<li><a href="https://huegoxaga.github.io/notes/linux/regex.html" target="_blank">Click here</a> to review Regex Syntax.</li>
<li><code>res = re.findall(r&quot;REpattern&quot;, stringName , flags=re.FlagOption)</code> Pass a string and find all matches base on the Regular Expression pattern, return the result in a list.<ul>
<li>Flags are optional.</li>
<li>The pattern string is not surrounded by <code>/</code>. Ex, <code>r&quot;gr[ae]y&quot;</code>.</li>
</ul>
</li>
<li><code>result = re.search(substring, string)</code> search if the <code>string</code> contains <code>substring</code>, and report the start index and end index if found.<ul>
<li><code>substring</code> can be replaced by a regular expression pattern.</li>
</ul>
</li>
<li>Sub-patterns surrounded by <code>()</code> in the regex pattern is called groups.<ul>
<li>The result of the first group can be accessed by using <code>result.group(1)</code></li>
<li>The result of the second group can be accessed by using <code>result.group(2)</code></li>
<li>The result of all groups can be accessed by using <code>result.group()</code></li>
<li>Inside the <code>()</code> prepend <code>?P&lt;groupName&gt;</code> to give the group a name, then its result can be accessed by using <code>result.group(&apos;groupName&apos;)</code></li>
</ul>
</li>
<li><code>re.sub(r&quot;pattern&quot;, itemToReplace, originalString)</code> Once a match is found, the second parameter will replace the matched item.</li>
<li><code>re.split(r&quot;pattern&quot;, string)</code> the <code>string</code> will be split by the matches into a list, the matches will be deleted and used to separate the <code>string</code>.</li>
<li><code>pattern = re.compile(r&quot;pattern&quot;)</code> The pattern will be compiled first and used later.<ul>
<li><code>pattern.search(string)</code> use the pattern to search.</li>
</ul>
</li>
</ul>
<h2 id="urllib"><code>urllib</code></h2>
<ul>
<li>It is a package that collects several modules for working with URLs:</li>
</ul>
<h3 id="urllibrequest"><code>urllib.request</code></h3>
<ul>
<li>It is used for opening and reading URLs</li>
<li><code>from urllib.request import urlopen</code></li>
</ul>
<h4 id="usage">Usage</h4>
<ul>
<li><code>html = urlopen(&quot;https://www.example.com/index.html&quot;).read()</code> load the <code>html</code> source code of a webpage as string in a variable.<ul>
<li><code>html = urlopen(&quot;https://www.example.com/index.html&quot;).read().decode(&apos;utf-8&apos;)</code> load the webpage that containing special characters from other languages.</li>
<li>Indentation and format of the <code>html</code> is preserved.</li>
</ul>
</li>
</ul>
<h2 id="csv"><code>csv</code></h2>
<ul>
<li>It works with <code>.csv</code> files.</li>
<li><code>import csv</code></li>
</ul>
<h3 id="usage">Usage</h3>
<ul>
<li>read a file with default delimter:<pre><code class="lang-py"><span class="hljs-keyword">with</span> open(<span class="hljs-string">&apos;filename.csv&apos;</span>, <span class="hljs-string">&apos;r&apos;</span>) <span class="hljs-keyword">as</span> csv_file:
  csv_reader =csv.reader(csv_file)
</code></pre>
<ul>
<li><code>csv_reader</code> stores a list of list. each list in the list is one row of data that can be accessed by index. Ex, <code>csv_reader[0][0]</code> is the first header.</li>
<li>use <code>csv.reader(csv_file, delimiter=&apos;\t&apos;)</code> to set delimiter as <code>\t</code>.</li>
<li><code>next(csv_reader)</code> will return one line at a time and skip to the next line.</li>
<li>use <code>csv.DictReader(csv_file)</code> to read csv files into an ordered dictionary. Keys for data in each row are the headers. Use <code>line[&apos;header&apos;]</code> to access data.</li>
</ul>
</li>
<li>write a file with default delimter:<pre><code class="lang-py"><span class="hljs-keyword">with</span> open(<span class="hljs-string">&apos;filename.csv&apos;</span>, <span class="hljs-string">&apos;r&apos;</span>) <span class="hljs-keyword">as</span> csv_file:
  csv_writer =csv.writer(csv_file)
</code></pre>
<ul>
<li>run <code>csv_writer.writerow(&quot;a,b,c&quot;)</code> to write a row to the file.</li>
<li>use <code>csv.writer(csv_file, delimiter=&apos;\t&apos;)</code> to set delimiter as <code>\t</code>.</li>
<li>use <code>csv.DictWriter(csv_file, fieldnames=listOfHeaders)</code> to write <code>csv</code> files from an ordered dictionary. add <code>csv_writer.writeheader()</code> first to write the header to the first line.</li>
<li>can use <code>del line[&apos;headerName&apos;]</code> to delete certain field, then to a new file.</li>
</ul>
</li>
</ul>
<h2 id="collections"><code>collections</code></h2>
<h3 id="counter"><code>Counter</code></h3>
<ul>
<li>It is used to count the occurrence of data that read by the Counter.<pre><code class="lang-py"><span class="hljs-keyword">from</span> collection <span class="hljs-keyword">import</span> Counter
c = Counter()
c.update([<span class="hljs-string">&apos;A&apos;</span>,<span class="hljs-string">&apos;B&apos;</span>]) <span class="hljs-comment"># or c = Counter([&apos;A&apos;,&apos;B&apos;]) in one step</span>
c.update([<span class="hljs-string">&apos;B&apos;</span>,<span class="hljs-string">&apos;C&apos;</span>])
print(c)
<span class="hljs-comment"># output: Counter({&apos;A&apos;: 1, &apos;B&apos;: 2, &apos;C&apos;: 1})</span>
</code></pre>
</li>
<li><code>c.most_common(10)</code> return the 10 most common items in the counter. in a list of tuples.</li>
</ul>
<h2 id="queue"><code>Queue</code></h2>
<ul>
<li>A queue data structure.</li>
<li><code>from queue import Queue</code></li>
<li><code>q = Queue()</code> declare a Queue object.</li>
<li><code>q.put(x)</code> add element <code>x</code> to the queue.</li>
<li><code>q.get()</code> get the from element from the queue.</li>
</ul>
<h2 id="time"><code>time</code></h2>
<ul>
<li><code>import time</code></li>
<li><code>time.sleep(x)</code> stop the thread x number of seconds.</li>
<li><code>time.time()</code> return the system time in seconds.</li>
</ul>
<h2 id="threading"><code>threading</code></h2>
<ul>
<li>Multi-threading still process one task at one time. It just focus on one thread at first. After some progress is made, it will be focusing on the next thread, instead of complete first one. This is controlled by the global interpreter lock(GIL).</li>
<li><code>import threading as td</code></li>
</ul>
<h3 id="usage">Usage</h3>
<ul>
<li>get info<ul>
<li><code>threading.active_count()</code> count the number of thread</li>
<li><code>threading.enumerate()</code> see all threads info</li>
<li><code>threading.current_thread()</code> see current thread</li>
</ul>
</li>
<li><code>thread = threading.Thread(target=methodName, name=&apos;T1&apos;)</code> define a thread by assigning a method to it.<ul>
<li><code>thread = threading.Thread(target=methodName, name=&apos;T1&apos;)</code> define a thread with a name.</li>
<li><code>t1 = threading.Thread(target=methodName,args=(x,y))</code> define a thread and pass variables into the method.</li>
</ul>
</li>
<li><code>thread.start()</code> start the thread.</li>
<li><code>thread.join()</code> hold all the code following until all previous threads have completed their tasks.</li>
<li>lock certain block of code in a thread to make sure it is completed before moving on to next thread.<ul>
<li><code>lock = threading.Lock()</code> declare a lock as global variable.</li>
<li><code>lock.acquire()</code> define the beginning of the locked code block.</li>
<li><code>lock.release()</code> define the end of the locked code block.</li>
<li><code>lock</code> optionally instead of using lock as a global variable, pass <code>lock</code> into the methods as a parameter.</li>
<li>Data structure <code>Queue</code> is usually used to stores a list of result from the multithreading methods.</li>
</ul>
</li>
</ul>
<h2 id="multiprocessing"><code>multiprocessing</code></h2>
<ul>
<li><code>import multiprocessing as mp</code></li>
<li>It enables methods to be run on multiple CPU cores.</li>
<li>All methods of <code>mp</code> are identical with <code>threading</code>.</li>
<li>Additionally, Multiprocessing can use <code>Pool()</code> and <code>map()</code> to auto processing multi-input and return a list of result.<pre><code class="lang-py"><span class="hljs-comment"># if processes parameter is omitted, it will use all cores available.</span>
pool = mp.Pool(processes=<span class="hljs-number">2</span>)
<span class="hljs-comment"># listX is a list of input for each method.</span>
res = pool.map(methodName, listX)
print(res)
</code></pre>
</li>
<li>Use <code>apply_async()</code> to start one multiprocessing task.<pre><code class="lang-py"><span class="hljs-comment"># only one imput is allowed, the comma followed is required.</span>
res = pool.apply_async(job, (<span class="hljs-number">2</span>,))
<span class="hljs-comment"># access result using res.get()</span>
print(res.get())
</code></pre>
</li>
<li>Interate the <code>apply_async()</code> method for multiple tasks.<pre><code class="lang-py">multi_res =[pool.apply_async(job, (i,)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">10</span>)]
print([res.get() <span class="hljs-keyword">for</span> res <span class="hljs-keyword">in</span> multi_res])
</code></pre>
</li>
<li>Multiprocessing methods need to instantiate special object type to access shared variables among cores.<ul>
<li><code>value1 = mp.Value(&apos;i&apos;, 0)</code> shared integer values.</li>
<li>use <code>value1.value</code> to access the the value of the <code>Value</code> object.</li>
<li><code>value2 = mp.Value(&apos;d&apos;, 3.14)</code> shared double values.</li>
<li><code>array = mp.Array(&apos;i&apos;, [1, 2, 3, 4])</code> shared array, only 1-D array is supported.</li>
<li><code>i</code> or <code>d</code> indicate the types for the value, <a href="https://docs.python.org/3/library/array.html" target="_blank">click to see</a> a complete list of options.</li>
</ul>
</li>
</ul>
<h2 id="tkinter"><code>tkinter</code></h2>
<ul>
<li>It is used to create Graphical User Interfaces Apps</li>
<li><code>import tkinter as tk</code></li>
</ul>
<h3 id="tkinter-objects">Tkinter Objects</h3>
<ul>
<li>The GUI is consisted of tkinter objects.</li>
<li>All GUI objects need to define the location, so it can be added to the Window object. The follow methods are used to define the location.<ul>
<li><code>objectName.pack()</code> add the object in the center, from top.<ul>
<li><code>objectName.pack(side=&apos;bottom&apos;)</code> add the object in the center, from bottom.</li>
<li><code>objectName.pack(side=&apos;right&apos;)</code> add the object in the center, from right.</li>
<li><code>objectName.pack(side=&apos;left&apos;)</code> add the object in the center, from left.</li>
</ul>
</li>
<li><code>objectName.grid(row=x, column=y, padx=10, pady=10)</code> using a grid<ul>
<li><code>padx</code> and <code>pady</code> define a grid in the entire window.</li>
<li><code>row</code> and <code>column</code> define the <code>x</code> and <code>y</code> location in the grid.</li>
</ul>
</li>
<li><code>objectName.place(x=20, y=10, anchor=&apos;nw&apos;)</code> use an anchor from northwestern corner.</li>
<li>These method can also be appended to the object constructor. <code>tk.Label(window, text=&quot;Hello&quot;).place(x=20, y=10, anchor=&apos;nw&apos;)</code></li>
</ul>
</li>
</ul>
<h5 id="window">Window</h5>
<ul>
<li><code>window = tk.Tk()</code> Window contructor</li>
<li><code>window.title(&apos;window title&apos;)</code> set title</li>
<li><code>window.geometry(&apos;200x100&apos;)</code> set size</li>
<li><code>window.mainloop()</code> load window in a loop that listen to any events.</li>
</ul>
<h5 id="tkinter-variables">Tkinter Variables</h5>
<ul>
<li>Its content can make the object is assoccoated with rerendered when value is changed.</li>
<li><code>varText = tk.StringVar()</code> create a string variable.</li>
<li><code>varInt = tk.IntVar()</code> create a integer variable.</li>
<li>It can be used as the <code>textvariable</code> parameter for other object. <code>l = tk.Label(window, textvariable=varText)</code></li>
<li><code>var.set(&apos;new text&apos;)</code> set the text of the string variable.</li>
<li>It can store list or tuples for listbox&apos;s <code>listvariable</code> parameter. <code>var2.set((11,22,33,44))</code>.</li>
</ul>
<h5 id="label">Label</h5>
<ul>
<li><code>l = tk.Label(window, text=&apos;label text here&apos;, bg=&apos;blue&apos;, font=(&apos;Arial&apos;, 12), width=15, height=2)</code> constructor.<ul>
<li><code>window</code> is the window the label will be in.</li>
<li>the unit for width and height is the number of the height and width of a character</li>
</ul>
</li>
<li><code>l.config(text=&apos;newText&apos;)</code> change label laproperties including its text if string variable is not used.</li>
</ul>
<h5 id="button">Button</h5>
<ul>
<li><code>b = tk.Button(window, text=&apos;hit me&apos;, width=15, height=2, command=functionName)</code> Constructor.<ul>
<li><code>window</code> is the window the button will be in.</li>
<li>The <code>command</code> parameter stores the event handler function.</li>
</ul>
</li>
</ul>
<h5 id="entry">Entry</h5>
<ul>
<li>This is the input text box.</li>
<li><code>e = tk.Entry(window)</code> The constructor<ul>
<li><code>e = tk.Entry(window,show=&apos;*&apos;)</code> make it a password type input.</li>
</ul>
</li>
<li><code>e.get()</code> get the user input value.</li>
</ul>
<h5 id="text">Text</h5>
<ul>
<li>This is the multi-line input text area.</li>
<li><code>t = tk.Text(window,height=2)</code> constructor</li>
<li><code>t.insert(&apos;insert&apos;,varText)</code> insert some text from string variable into the text field after the cursor position.</li>
<li><code>t.insert(&apos;end&apos;,varText)</code> insert some text from string variable into the text field at the end.</li>
</ul>
<h5 id="listbox">ListBox</h5>
<ul>
<li><code>lb = tk.Listbox(window, listvariable=var2)</code><ul>
<li><code>listvariable</code> can be a string variable that stores list or tuples.</li>
</ul>
</li>
<li><code>lb.insert(&apos;end&apos;, &quot;text&quot;)</code> insert <code>text</code> at the end</li>
<li><code>lb.insert(0, &quot;text&quot;)</code> insert <code>text</code> at the top</li>
<li><code>lb.insert(2, &quot;text&quot;)</code> insert <code>text</code> after the second element.</li>
<li><code>lb.delete(2)</code> delete the third element.</li>
<li><code>lb.get(2)</code> get the third element value.</li>
<li><code>lb.curselection()</code> return the index of the selected element.</li>
</ul>
<h5 id="radiobutton">RadioButton</h5>
<ul>
<li>A single radio button, a group of <code>Radiobutton</code> objects is usually used.</li>
<li><code>r1 = tk.Radiobutton(window, text=&apos;Option A&apos;,variable=var, value=&apos;A&apos;,command=functionName)</code> constructor<ul>
<li>The <code>variable</code> parameter will assign the radiobuton <code>value</code> to the string variable <code>var</code> when the button is selected and then the function will be called.</li>
</ul>
</li>
</ul>
<h5 id="scale">Scale</h5>
<ul>
<li>It is a horizontal scroll bar for selecting a value.</li>
<li><code>s = tk.Scale(window, label=&apos;New Scale&apos;, from_=5, to=11, orient=tk.HORIZONTAL, length=200, showvalue=0, tickinterval=2, resolution=0.01, command=functionName)</code> Scale Constructor.<ul>
<li><code>from_</code> and <code>to</code> set the value range. <code>from</code> is a redefined keyword, so <code>from_</code> is used.</li>
<li><code>orient=tk.HORIZONTAL</code> set the scroll bar oritentation.</li>
<li><code>length=200</code> size in pixel.</li>
<li><code>resolution=0.01</code> set the value intervals.</li>
<li><code>showvalue=0</code> if set to <code>1</code>, show selected value on top.</li>
<li><code>tickinterval=2</code> set the interval of the labels.</li>
<li>An value will be passed into the event handler automatically<pre><code class="lang-py"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">print_selection</span><span class="hljs-params">(x)</span>:</span>
  <span class="hljs-comment"># x is the current selected value of the Scale object</span>
</code></pre>
</li>
</ul>
</li>
</ul>
<h5 id="checkbutton">CheckButton</h5>
<ul>
<li>It is a single check box.</li>
<li><code>c1 = tk.Checkbutton(window, text=&apos;option1&apos;, variable=intVar, onvalue=1, offvalue=0, command=functionName)</code> <code>Checkbutton</code> constructor<ul>
<li><code>onvalue</code> this value will be assign to the <code>variable</code> parameter when the box is checked.</li>
<li><code>offvalue</code> this value will be assign to the <code>variable</code> parameter when the box is unchecked.</li>
</ul>
</li>
</ul>
<h5 id="photoimage">PhotoImage</h5>
<ul>
<li>It is used to store images.</li>
<li><code>img = tk.PhotoImage(file=&apos;filename.png&apos;)</code> Constructor to load image into the variable <code>img</code>.</li>
</ul>
<h5 id="canvas">Canvas</h5>
<ul>
<li>A area that can draw shapes on it.</li>
<li><code>shape = tk.Canvas(window, bg=&apos;blue&apos;, height=100, width=200)</code> create a canvas</li>
<li><code>shape = canvas.create_line(x0, y0, x1, y1)</code> create a line.</li>
<li><code>shape = canvas.create_oval(x0, y0, x1, y1, fill=&apos;red&apos;)</code> create an oval.</li>
<li><code>shape = canvas.create_arc(x0, y0, x1, y1, start=0, extent=180)</code> create an arc</li>
<li><code>shape = canvas.create_rectangle(x0, y0, x1, y1)</code> create a rectangle</li>
<li><code>shape = canvas.create_image(x, y, anchor=&apos;nw&apos;, image=file)</code> add an image<ul>
<li>the <code>anchor</code> value <code>nw</code> means northwesteron corner. <code>x</code> and <code>y</code> is the distance from the anchor.</li>
</ul>
</li>
<li><code>canvas.move(shape, x, y)</code> move the move to the right <code>x</code> unit, to the bottom <code>y</code> unit.</li>
</ul>
<p>This is a example using urlopen for web scraping</p>
<p>from urllib.request import urlopen</p>
<h1 id="if-has-chinese-apply-decode">if has Chinese, apply decode()</h1>
<p>html = urlopen(&quot;<a href="https://morvanzhou.github.io/static/scraping/basic-structure.html&quot;).read().decode(&apos;utf-8" target="_blank">https://morvanzhou.github.io/static/scraping/basic-structure.html&quot;).read().decode(&apos;utf-8</a>&apos;)
print(html)</p>
<p>import re
res = re.findall(r&quot;<title>(.+?)</title>&quot;, html)
print(&quot;\nPage title is: &quot;, res[0])</p>
<h1 id="this-code-is-used-to-read-content-in-the--tag">This code is used to read content in the <title> tag.</title></h1>
<p>res = re.findall(r&quot;</p><p>(.\*?)</p>&quot;, html, flags=re.DOTALL) # re.DOTALL if multi line
print(&quot;\nPage paragraph is: &quot;, res[0])<p></p>
<h1 id="this-code-is-used-to-read-content-in-the--tag">This code is used to read content in the <p> tag.</p></h1>
<p>res = re.findall(r&apos;href=&quot;(.*?)&quot;&apos;, html)
print(&quot;\nAll links: &quot;, res</p>
<h1 id="this-code-is-used-to-read-content-in-the--tag">This code is used to read content in the <a> tag.</a></h1>
<p>beautiful soup</p>
<p>install
for python3 in console type
pip3 install beautiful4</p>
<p>from bs4 import BeautifulSoup
from urllib.request import urlopen</p>
<h1 id="if-has-chinese-apply-decode">if has Chinese, apply decode()</h1>
<p>html = urlopen(&quot;<a href="https://morvanzhou.github.io/static/scraping/basic-structure.html&quot;).read().decode(&apos;utf-8" target="_blank">https://morvanzhou.github.io/static/scraping/basic-structure.html&quot;).read().decode(&apos;utf-8</a>&apos;)
print(html)</p>
<h1 id="load-content-to-soup">load content to soup</h1>
<p>soup = BeautifulSoup(html, features=&apos;lxml&apos;)
print(soup.h1)
print(&apos;\n&apos;, soup.p)</p>
<h1 id="this-code-is-used-to-read-content-in-the--or--tag
allhref--soupfindalla
allhref--lhref-for-l-in-allhref
printn-allhref
this-finds-all-links
month--soupfindallli-class-month
for-m-in-month
printmgettext-gettext-is-method-for-pure-content-without-tags
this-uses-class-tag-from-css-code
jan--soupfindul-class-jan
djan--janfindallli--use-jan-as-a-parent
for-d-in-djan
printdgettext
this-is-used-to-find-content-in-a-tag-of-a-class
combine-re-and-soup
from-bs4-import-beautifulsoup
from-urllibrequest-import-urlopen
import-re
if-has-chinese-apply-decode
html--urlopenhttpsmorvanzhougithubiostaticscrapingtablehtmlreaddecodeutf-8
printhtml
soup--beautifulsouphtml-featureslxml
imglinks--soupfindallimg-src-recompilejpg
for-link-in-imglinks
printlinksrc
courselinks--soupfindalla-href-recompilehttpsmorvan
for-link-in-courselinks
printlinkhref
example-code
from-bs4-import-beautifulsoup
from-urllibrequest-import-urlopen
import-re
import-random
baseurl--httpsbaikebaiducom
his--iteme7bd91e7bb9ce788ace899ab5162711
url--baseurl--his-1
html--urlopenurlreaddecodeutf-8
soup--beautifulsouphtml-featureslxml
printsoupfindh1gettext--url--his-1
find-return-the-first-result
find-valid-urls
suburls--soupfindalla-target-blank-href-recompileitem2
if-lensuburls--0
hisappendrandomsamplesuburls-10href
else--no-valid-sub-link-found
hispop
printhis
find-all-url
his--iteme7bd91e7bb9ce788ace899ab5162711
for-i-in-range20
url--baseurl--his-1
html--urlopenurlreaddecodeutf-8
soup--beautifulsouphtml-featureslxml
printi-soupfindh1gettext-----url--his-1

-find-valid-urls
suburls--soupfindalla-target-blank-href-recompileitem2

if-lensuburls--0
----hisappendrandomsamplesuburls-10href
else
-----no-valid-sub-link-found
----hispop
for-post-and-get-access
using-requests-to-get-online-data
pip-install-requests
pip3-install-requests
import-requests
import-webbrowser
for-get-request
get-result-into-r-directly
param--wd-&#x83AB;&#x70E6;-python
this-generate-auto-url-for-the-wd-keyword
r--requestsgethttpwwwbaiducoms-paramsparam
printrurl
open-browser-within-the-program
webbrowseropenrurl
for-post-request
post-data-into-server-and-save-result-into-r
data--firstname-&#x83AB;&#x70E6;-lastname-&#x5468;
r--requestsposthttppythonscrapingcomfilesprocessingphp-datadata
printrtext
upload-image
file--uploadfile-openimagepng-rb
r--requestsposthttppythonscrapingcomfilesprocessing2php-filesfile
printrtext
login
payload--username-morvan-password-password
r--requestsposthttppythonscrapingcompagescookieswelcomephp-datapayload
printrcookiesgetdict
cookies-is-mandatory-to-keep-the-connection
r--requestsgethttppythonscrapingcompagescookiesprofilephp-cookiesrcookies
printrtext
another-login-method
using-session-control-cookie
session--requestssession
payload--username-morvan-password-password
r--sessionposthttppythonscrapingcompagescookieswelcomephp-datapayload
printrcookiesgetdict
r--sessiongethttppythonscrapingcompagescookiesprofilephp
printrtext
download-files
import-os
osmakedirsimg-existoktrue
imageurl--httpsmorvanzhougithubiostaticimgdescriptionlearningstepflowchartpng
using-urltrtrieve
from-urllibrequest-import-urlretrieve
urlretrieveimageurl-imgimage1png--whole-document
using-request
import-requests
r--requestsgetimageurl
with-openimgimage2png-wb-as-f
fwritercontent
r--requestsgetimageurl-streamtrue--stream-loading
with-openimgimage3png-wb-as-f
for-chunk-in-ritercontentchunksize32
fwritechunk
from-bs4-import-beautifulsoup
import-requests
url--httpwwwnationalgeographiccomcnanimals
html--requestsgeturltext
soup--beautifulsouphtml-lxml
imgul--soupfindallul-class-imglist
import-os
osmakedirsimg-existoktrue
for-ul-in-imgul
imgs--ulfindallimg
for-img-in-imgs
url--imgsrc
r--requestsgeturl-streamtrue
imagename--urlsplit-1
with-openimgs--imagename-wb-as-f
for-chunk-in-ritercontentchunksize128
fwritechunk
printsaved-s--imagename
import-multiprocessing-as-mp
import-time
from-urllibrequest-import-urlopen-urljoin
from-bs4-import-beautifulsoup
import-re
baseurl--http1270014000
baseurl--httpsmorvanzhougithubio
dont-over-crawl-the-website-or-you-may-never-visit-again
if-baseurl--http1270014000
restrictedcrawl--true
else
restrictedcrawl--false
def-crawlurl
response--urlopenurl
timesleep01-pretend-to-wait-slightly-delay-for-downloading
return-responsereaddecode
def-parsehtml
soup--beautifulsouphtml-lxml
urls--soupfindalla-href-recompile
title--soupfindh1gettextstrip
pageurls--seturljoinbaseurl-urlhref-for-url-in-urls
url--soupfindmeta-property-ogurlcontent
return-title-pageurls-url
normal-way
unseen--setbaseurl
seen--set
count-t1--1-timetime
while-lenunseen--0--still-get-some-url-to-visit
if-restrictedcrawl-and-lenseen--20
break
printndistributed-crawling
htmls--crawlurl-for-url-in-unseen

printndistributed-parsing
results--parsehtml-for-html-in-htmls

printnanalysing
seenupdateunseen----------seen-the-crawled
unseenclear---------------nothing-unseen

for-title-pageurls-url-in-results
----printcount-title-url
----count--1
----unseenupdatepageurls---seen------get-new-url-to-crawl
printtotal-time-1f-s--timetime-t1---53-s
multiprocessing
unseen--setbaseurl
seen--set
pool--mppool4count-t1--1-timetime
while-lenunseen--0--still-get-some-url-to-visit
if-restrictedcrawl-and-lenseen--20
break
printndistributed-crawling
crawljobs--poolapplyasynccrawl-argsurl-for-url-in-unseen
htmls--jget-for-j-in-crawljobs--request-connection
printndistributed-parsing
parsejobs--poolapplyasyncparse-argshtml-for-html-in-htmls
results--jget-for-j-in-parsejobs--------------------------------------parse-html

printnanalysing
seenupdateunseen----------seen-the-crawled
unseenclear---------------nothing-unseen

for-title-pageurls-url-in-results
----printcount-title-url
----count--1
----unseenupdatepageurls---seen------get-new-url-to-crawl
printtotal-time-1f-s--timetime-t1---16-s-
asyncio-tutorial
import-time
normal-way
def-jobt
printstart-job--t
timesleept--wait-for-t-seconds
printjob--t--takes--t--s
def-main
jobt-for-t-in-range1-3
t1--timetime
main
printno-async-total-time---timetime---t1
using-asyncio
import-asyncio
async-def-jobt
printstart-job--t
await-asynciosleept--wait-for-t-seconds-it-will-look-for-another-job-while-await
printjob--t--takes--t--s
async-def-mainloop
tasks--loopcreatetaskjobt-for-t-in-range1-3--just-create-not-run-job
await-asynciowaittasks--run-jobs-and-wait-for-all-tasks-done
t1--timetime
loop--asynciogeteventloop
looprununtilcompletemainloop
loopclose--ipython-notebook-gives-error-if-close-loop
printasync-total-time---timetime---t1
normal-way-for-scraping
import-requests
url--httpsmorvanzhougithubio
def-normal-for-i-in-range2
r--requestsgeturl
url--rurl
printurl
t1--timetime
normal
printnormal-total-time-timetime-t1
using-aiohttp-from-saync
import-aiohttp
async-def-jobsession
response--await-sessiongeturl
return-strresponseurl
async-def-mainloop
async-with-aiohttpclientsession-as-session
tasks--loopcreatetaskjobsession-for--in-range2
finished-unfinished--await-asynciowaittasks
allresults--rresult-for-r-in-finished--get-return-from-job
printallresults
t1--timetime
loop--asynciogeteventloop
looprununtilcompletemainloop
loopclose--ipython-notebook-gives-error-if-close-loop
printasync-total-time-timetime---t1
selenium-generate-user-behaviour-into-code-and-run-in-python-code
1-pip-install-selenium
2-driver-for-brewer-copy-heckodriver-to-binchmod-m
for-firefox-katalonrecorder-is-easier-to-add-as-addons
scrapy-library
advanced-automatically-tools-for-scraping
pip-install-scrapy
import-scrapy
class-mofanspiderscrapyspider
name--mofan
starturls--
httpsmorvanzhougithubio
--unseen--set--seen--set--we-dont-need-these-two-as-scrapy-will-deal-with-them-automatically
def-parseself-response
----yield-------return-some-results
--------title-responsecssh1textextractfirstdefaultmissingstripreplace-
--------url-responseurl
----

----urls--responsecssaattrhrefrer------find-all-sub-urls
----for-url-in-urls
--------yield-responsefollowurl-callbackselfparse------it-will-filter-duplication-automatically
lastly-run-this-in-terminal
scrapy-runspider-5-2-scrapypy--o-resjson
">This code is used to read content in the <h1 id="or--tag"> or <p> tag.</p></h1>
<p>all_href = soup.find_all(&apos;a&apos;)
all_href = [l[&apos;href&apos;] for l in all_href]
print(&apos;\n&apos;, all_href)</p>
<h1 id="this-finds-all-links">This finds all links</h1>
<p>month = soup.find_all(&apos;li&apos;, {&quot;class&quot;: &quot;month&quot;})
for m in month:
print(m.get_text()) #get_text is method for pure content without tags.</p>
<h1 id="this-uses-class-tag-from-css-code">This uses class tag from css code.</h1>
<p>jan = soup.find(&apos;ul&apos;, {&quot;class&quot;: &apos;jan&apos;})
d_jan = jan.find_all(&apos;li&apos;) # use jan as a parent
for d in d_jan:
print(d.get_text())</p>
<p>This is used to find content in a tag of a class.</p>
<p>Combine RE and soup</p>
<p>from bs4 import BeautifulSoup
from urllib.request import urlopen
import re</p>
<h1 id="if-has-chinese-apply-decode">if has Chinese, apply decode()</h1>
<p>html = urlopen(&quot;<a href="https://morvanzhou.github.io/static/scraping/table.html&quot;).read().decode(&apos;utf-8" target="_blank">https://morvanzhou.github.io/static/scraping/table.html&quot;).read().decode(&apos;utf-8</a>&apos;)
print(html)
soup = BeautifulSoup(html, features=&apos;lxml&apos;)</p>
<p>img<em>links = soup.find_all(&quot;img&quot;, {&quot;src&quot;: re.compile(&apos;.</em>?.jpg&apos;)})
for link in img<em>links:
print(link[&#x2018;src&apos;])
course_links = soup.find_all(&apos;a&apos;, {&apos;href&apos;: re.compile(&apos;<a href="https://morvan" target="_blank">https://morvan</a>.</em>&apos;)})
for link in course_links:
print(link[&#x2018;href&#x2019;])</p>
<p>Example code:</p>
<p>from bs4 import BeautifulSoup
from urllib.request import urlopen
import re
import random</p>
<p>base_url = &quot;<a href="https://baike.baidu.com" target="_blank">https://baike.baidu.com</a>&quot;
his = [&#x201C;/item/%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/5162711&quot;]</p>
<p>url = base_url + his[-1]</p>
<p>html = urlopen(url).read().decode(&apos;utf-8&apos;)
soup = BeautifulSoup(html, features=&apos;lxml&apos;)
print(soup.find(&apos;h1&apos;).get_text(), &apos; url: &apos;, his[-1])</p>
<h1 id="find-return-the-first-result">find return the first result</h1>
<h1 id="find-valid-urls">find valid urls</h1>
<p>sub_urls = soup.find_all(&quot;a&quot;, {&quot;target&quot;: &quot;_blank&quot;, &quot;href&quot;: re.compile(&quot;/item/(%.{2})+$&quot;)})</p>
<p>if len(sub_urls) != 0:
his.append(random.sample(sub_urls, 1)[0][&apos;href&apos;])
else: # no valid sub link found
his.pop()
print(his)</p>
<h1 id="find-all-url">find all url</h1>
<p>his = [&quot;/item/%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/5162711&quot;]</p>
<p>for i in range(20):
url = base_url + his[-1]</p>
<pre><code>html = urlopen(url).read().decode(&apos;utf-8&apos;)
soup = BeautifulSoup(html, features=&apos;lxml&apos;)
print(i, soup.find(&apos;h1&apos;).get_text(), &apos;    url: &apos;, his[-1])

# find valid urls
sub_urls = soup.find_all(&quot;a&quot;, {&quot;target&quot;: &quot;_blank&quot;, &quot;href&quot;: re.compile(&quot;/item/(%.{2})+$&quot;)})

if len(sub_urls) != 0:
    his.append(random.sample(sub_urls, 1)[0][&apos;href&apos;])
else:
    # no valid sub link found
    his.pop()
</code></pre><p>For post and get access</p>
<p>Using requests to get online data</p>
<p>pip install requests
pip3 install requests</p>
<p>import requests
import webbrowser</p>
<h1 id="for-get-request">for get request</h1>
<h1 id="get-result-into-r-directly">get result into r directly</h1>
<p>param = {&quot;wd&quot;: &#x201C;&#x83AB;&#x70E6; Python&quot;}</p>
<h1 id="this-generate-auto-url-for-the-wd-keyword">this generate auto url for the wd keyword.</h1>
<p>r = requests.get(&apos;<a href="http://www.baidu.com/s" target="_blank">http://www.baidu.com/s</a>&apos;, params=param)
print(r.url)</p>
<h1 id="open-browser-within-the-program">open browser within the program</h1>
<p>webbrowser.open(r.url)</p>
<h1 id="for-post-request">for post request</h1>
<h1 id="post-data-into-server-and-save-result-into-r">post data into server, and save result into r</h1>
<p>data = {&apos;firstname&apos;: &apos;&#x83AB;&#x70E6;&apos;, &apos;lastname&apos;: &apos;&#x5468;&apos;}
r = requests.post(&apos;<a href="http://pythonscraping.com/files/processing.php" target="_blank">http://pythonscraping.com/files/processing.php</a>&apos;, data=data)
print(r.text)</p>
<p>upload image
file = {&apos;uploadFile&apos;: open(&apos;./image.png&apos;, &apos;rb&apos;)}
r = requests.post(&apos;<a href="http://pythonscraping.com/files/processing2.php" target="_blank">http://pythonscraping.com/files/processing2.php</a>&apos;, files=file)
print(r.text)</p>
<p>login</p>
<p>payload = {&apos;username&apos;: &apos;Morvan&apos;, &apos;password&apos;: &apos;password&apos;}
r = requests.post(&apos;<a href="http://pythonscraping.com/pages/cookies/welcome.php" target="_blank">http://pythonscraping.com/pages/cookies/welcome.php</a>&apos;, data=payload)
print(r.cookies.get_dict())</p>
<h1 id="cookies-is-mandatory-to-keep-the-connection">cookies is mandatory to keep the connection.</h1>
<p>r = requests.get(&apos;<a href="http://pythonscraping.com/pages/cookies/profile.php" target="_blank">http://pythonscraping.com/pages/cookies/profile.php</a>&apos;, cookies=r.cookies)
print(r.text)</p>
<p>another login method</p>
<h1 id="using-session-control-cookie">using session control cookie.</h1>
<p>session = requests.Session()
payload = {&apos;username&apos;: &apos;Morvan&apos;, &apos;password&apos;: &apos;password&apos;}
r = session.post(&apos;<a href="http://pythonscraping.com/pages/cookies/welcome.php" target="_blank">http://pythonscraping.com/pages/cookies/welcome.php</a>&apos;, data=payload)
print(r.cookies.get_dict())
r = session.get(&quot;<a href="http://pythonscraping.com/pages/cookies/profile.php" target="_blank">http://pythonscraping.com/pages/cookies/profile.php</a>&quot;)
print(r.text)</p>
<p>download files</p>
<p>import os
os.makedirs(&apos;./img/&apos;, exist_ok=True)</p>
<p>IMAGE_URL = &#x201C;<a href="https://morvanzhou.github.io/static/img/description/learning_step_flowchart.png" target="_blank">https://morvanzhou.github.io/static/img/description/learning_step_flowchart.png</a>&quot;</p>
<h1 id="using-urltrtrieve">using urltrtrieve</h1>
<p>from urllib.request import urlretrieve
urlretrieve(IMAGE_URL, &apos;./img/image1.png&apos;) # whole document</p>
<h1 id="using-request">Using request</h1>
<p>import requests
r = requests.get(IMAGE_URL)
with open(&apos;./img/image2.png&apos;, &apos;wb&apos;) as f:
f.write(r.content)</p>
<p>r = requests.get(IMAGE_URL, stream=True) # stream loading</p>
<p>with open(&apos;./img/image3.png&apos;, &apos;wb&apos;) as f:
for chunk in r.iter_content(chunk_size=32):
f.write(chunk)</p>
<p>from bs4 import BeautifulSoup
import requests</p>
<p>URL = &#x201C;<a href="http://www.nationalgeographic.com.cn/animals/" target="_blank">http://www.nationalgeographic.com.cn/animals/</a>&quot;</p>
<p>html = requests.get(URL).text
soup = BeautifulSoup(html, &apos;lxml&apos;)
img_ul = soup.find_all(&apos;ul&apos;, {&quot;class&quot;: &#x201C;img_list&quot;})</p>
<p>import os</p>
<p>os.makedirs(&apos;./img/&apos;, exist_ok=True)</p>
<p>for ul in img_ul:
imgs = ul.find_all(&apos;img&apos;)
for img in imgs:
url = img[&apos;src&apos;]
r = requests.get(url, stream=True)
image_name = url.split(&apos;/&apos;)[-1]
with open(&apos;./img/%s&apos; % image_name, &apos;wb&apos;) as f:
for chunk in r.iter_content(chunk_size=128):
f.write(chunk)
print(&apos;Saved %s&apos; % image_name)</p>
<p>import multiprocessing as mp
import time
from urllib.request import urlopen, urljoin
from bs4 import BeautifulSoup
import re</p>
<p>base_url = &quot;<a href="http://127.0.0.1:4000/" target="_blank">http://127.0.0.1:4000/</a>&quot;</p>
<h1 id="baseurl--httpsmorvanzhougithubio">base_url = &apos;<a href="https://morvanzhou.github.io/" target="_blank">https://morvanzhou.github.io/</a>&apos;</h1>
<h1 id="dont-over-crawl-the-website-or-you-may-never-visit-again">DON&apos;T OVER CRAWL THE WEBSITE OR YOU MAY NEVER VISIT AGAIN</h1>
<p>if base_url != &quot;<a href="http://127.0.0.1:4000/" target="_blank">http://127.0.0.1:4000/</a>&quot;:
restricted_crawl = True
else:
restricted_crawl = False</p>
<p>def crawl(url):
response = urlopen(url)
time.sleep(0.1) #pretend to wait slightly delay for downloading
return response.read().decode()</p>
<p>def parse(html):
soup = BeautifulSoup(html, &apos;lxml&apos;)
urls = soup.find_all(&apos;a&apos;, {&quot;href&quot;: re.compile(&apos;^/.+?/$&apos;)})
title = soup.find(&apos;h1&apos;).get_text().strip()
page_urls = set([urljoin(base_url, url[&apos;href&apos;]) for url in urls])
url = soup.find(&apos;meta&apos;, {&apos;property&apos;: &quot;og:url&quot;})[&apos;content&apos;]
return title, page_urls, url</p>
<p>Normal way:
unseen = set([base_url,])
seen = set()</p>
<p>count, t1 = 1, time.time()</p>
<p>while len(unseen) != 0: # still get some url to visit
if restricted_crawl and len(seen) &gt; 20:
break</p>
<pre><code>print(&apos;\nDistributed Crawling...&apos;)
htmls = [crawl(url) for url in unseen]

print(&apos;\nDistributed Parsing...&apos;)
results = [parse(html) for html in htmls]

print(&apos;\nAnalysing...&apos;)
seen.update(unseen)         # seen the crawled
unseen.clear()              # nothing unseen

for title, page_urls, url in results:
    print(count, title, url)
    count += 1
    unseen.update(page_urls - seen)     # get new url to crawl
</code></pre><p>print(&apos;Total time: %.1f s&apos; % (time.time()-t1, )) # 53 s</p>
<p>Multiprocessing:
unseen = set([base_url,])
seen = set()</p>
<p>pool = mp.Pool(4)<br>count, t1 = 1, time.time()
while len(unseen) != 0: # still get some url to visit
if restricted_crawl and len(seen) &gt; 20:
break
print(&apos;\nDistributed Crawling...&apos;)
crawl_jobs = [pool.apply_async(crawl, args=(url,)) for url in unseen]
htmls = [j.get() for j in crawl_jobs] # request connection</p>
<pre><code>print(&apos;\nDistributed Parsing...&apos;)
parse_jobs = [pool.apply_async(parse, args=(html,)) for html in htmls]
results = [j.get() for j in parse_jobs]                                     # parse html

print(&apos;\nAnalysing...&apos;)
seen.update(unseen)         # seen the crawled
unseen.clear()              # nothing unseen

for title, page_urls, url in results:
    print(count, title, url)
    count += 1
    unseen.update(page_urls - seen)     # get new url to crawl
</code></pre><p>print(&apos;Total time: %.1f s&apos; % (time.time()-t1, )) # 16 s !!!</p>
<p>Asyncio tutorial</p>
<p>import time</p>
<h1 id="normal-way">normal way</h1>
<p>def job(t):
print(&apos;Start job &apos;, t)
time.sleep(t) # wait for &quot;t&quot; seconds
print(&apos;Job &apos;, t, &apos; takes &apos;, t, &apos; s&apos;)</p>
<p>def main():
[job(t) for t in range(1, 3)]</p>
<p>t1 = time.time()
main()
print(&quot;NO async total time : &quot;, time.time() - t1)</p>
<h1 id="using-asyncio">using asyncio</h1>
<p>import asyncio</p>
<p>async def job(t):
print(&apos;Start job &apos;, t)
await asyncio.sleep(t) # wait for &quot;t&quot; seconds, it will look for another job while await
print(&apos;Job &apos;, t, &apos; takes &apos;, t, &apos; s&apos;)</p>
<p>async def main(loop):
tasks = [loop.create_task(job(t)) for t in range(1, 3)] # just create, not run job
await asyncio.wait(tasks) # run jobs and wait for all tasks done</p>
<p>t1 = time.time()
loop = asyncio.get_event_loop()
loop.run_until_complete(main(loop))</p>
<h1 id="loopclose--ipython-notebook-gives-error-if-close-loop">loop.close() # Ipython notebook gives error if close loop</h1>
<p>print(&quot;Async total time : &quot;, time.time() - t1)</p>
<h1 id="normal-way-for-scraping">normal way for scraping</h1>
<p>import requests</p>
<p>URL = &apos;<a href="https://morvanzhou.github.io/" target="_blank">https://morvanzhou.github.io/</a>&apos;</p>
<p>def normal():<br> for i in range(2):
r = requests.get(URL)
url = r.url
print(url)</p>
<p>t1 = time.time()
normal()
print(&quot;Normal total time:&quot;, time.time()-t1)</p>
<h1 id="using-aiohttp-from-saync">using aiohttp from saync</h1>
<p>import aiohttp</p>
<p>async def job(session):
response = await session.get(URL)
return str(response.url)</p>
<p>async def main(loop):
async with aiohttp.ClientSession() as session:
tasks = [loop.create<em>task(job(session)) for </em> in range(2)]
finished, unfinished = await asyncio.wait(tasks)
all_results = [r.result() for r in finished] # get return from job
print(all_results)</p>
<p>t1 = time.time()
loop = asyncio.get_event_loop()
loop.run_until_complete(main(loop))</p>
<h1 id="loopclose--ipython-notebook-gives-error-if-close-loop">loop.close() # Ipython notebook gives error if close loop</h1>
<p>print(&quot;Async total time:&quot;, time.time() - t1)
Selenium generate user behaviour into code and run in python code
1 pip install selenium
2 driver for brewer copy heckodriver to bin(chmod +m)</p>
<p>For firefox katalonrecorder is easier to add as addons.</p>
<p>Scrapy library
advanced automatically tools for scraping</p>
<p>pip install scrapy
import scrapy</p>
<p>class MofanSpider(scrapy.Spider):
name = &quot;mofan&quot;
start_urls = [
&apos;<a href="https://morvanzhou.github.io/" target="_blank">https://morvanzhou.github.io/</a>&apos;,
] # unseen = set() # seen = set() # we don&apos;t need these two as scrapy will deal with them automatically</p>
<pre><code>def parse(self, response):
    yield {     # return some results
        &apos;title&apos;: response.css(&apos;h1::text&apos;).extract_first(default=&apos;Missing&apos;).strip().replace(&apos;&quot;&apos;, &quot;&quot;),
        &apos;url&apos;: response.url,
    }

    urls = response.css(&apos;a::attr(href)&apos;).re(r&apos;^/.+?/$&apos;)     # find all sub urls
    for url in urls:
        yield response.follow(url, callback=self.parse)     # it will filter duplication automatically
</code></pre><h1 id="lastly-run-this-in-terminal">lastly, run this in terminal</h1>
<h1 id="scrapy-runspider-5-2-scrapypy--o-resjson">scrapy runspider 5-2-scrapy.py -o res.json</h1>
</h1>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="anaconda.html" class="navigation navigation-prev " aria-label="Previous page: Anaconda">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="django.html" class="navigation navigation-next " aria-label="Next page: Django">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Python Stardard Library","level":"1.2.2","depth":2,"next":{"title":"Django","level":"1.2.3","depth":2,"path":"python/django.md","ref":"python/django.md","articles":[]},"previous":{"title":"Anaconda","level":"1.2.1","depth":2,"path":"python/anaconda.md","ref":"python/anaconda.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"python/standard-library.md","mtime":"2020-03-25T19:28:00.278Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-03-25T19:51:01.914Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

